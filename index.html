<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RTT Payment Gateway Redirect</title>
    <!-- Include Tailwind CSS -->
    <link href="https://cdn.tailwindcss.com" rel="stylesheet">
    <!-- JavaScript for fetching and handling the image URL -->
    <script>
        function fetchAndDisplayImage() {
            const scriptUrl = 'https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec'; // Your Apps Script URL

            fetch(scriptUrl) // Fetching the image URL from Google Apps Script
                .then(response => {
                    if (response.ok) {
                        return response.text(); // Expecting a URL as text
                    } else {
                        throw new Error("Failed to fetch the image URL");
                    }
                })
                .then(imageUrl => {
                    // Update the `src` attribute of the `<img>` element with the fetched URL
                    document.getElementById('qr-code').src = imageUrl;
                })
                .catch(error => {
                    console.error("Error fetching image URL:", error);
                    document.getElementById('error-message').textContent = "Error loading QR code. Please try again later."; // Display error message
                });
        }
    </script>
</head>
<body onload="fetchAndDisplayImage()">
    <!-- Loading Page -->
    <div id="loading-page" class="flex justify-center items-center h-screen bg-gray-100 flex-col">
        <div class="w-16 h-16 border-4 border-blue-400 border-dotted rounded-full animate-spin mb-4"></div>
        <p class="text-gray-600 text-xl">Redirecting to Payment Gateway...</p>
    </div>

    <!-- QR Code Page -->
    <div id="qr-code-page" class="flex flex-col justify-center items-center h-screen bg-white">
        <img src="" id="qr-code" alt="QR Code"> <!-- Image to be updated with fetched URL -->
        <p class="text-gray-600 text-xl mt-4">Scan this QR code to proceed with payment.</p>
        <p id="error-message" class="text-red-500"></p> <!-- For error messages -->
    </div>
</body>
</html>
